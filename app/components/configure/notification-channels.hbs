<ContentPanel @title="APN Configutation" @open={{true}} @pad={{true}} @panelBodyClass="bg-white dark:bg-gray-800">
    <InputGroup @name="APN Key ID" @value={{this.apn.key_id}} disabled={{this.isLoading}} />
    <InputGroup @name="APN Team ID" @value={{this.apn.team_id}} disabled={{this.isLoading}} />
    <InputGroup @name="APN App Bundle ID" @value={{this.apn.app_bundle_id}} disabled={{this.isLoading}} />
    <InputGroup @name="APN Private Key" disabled={{this.isLoading}}>
        <Textarea class="form-input w-full" @value={{this.apn.private_key_content}} placeholder="APN Private Key" rows="10" disabled={{this.isLoading}} />
    </InputGroup>
    <InputGroup @name="APN Production">
        <Checkbox @value={{this.apn.production}} @onToggle={{fn (mut this.apn.production)}} @disabled={{this.isLoading}} />
    </InputGroup>
    {{#if this.testResponse}}
        <div class="animate-pulse flex flex-row items-center rounded-lg border {{if (eq this.testResponse.status 'error') 'border-red-900 bg-red-800 text-red-100' 'border-green-900 bg-green-800 text-green-100'}} shadow-sm my-2 px-4 py-2">
            <FaIcon @icon={{if (eq this.testResponse.status 'error') 'triangle-exclamation' 'circle-check'}} class="mr-1.5 {{if (eq this.testResponse.status 'error') 'text-red-200' 'text-green-200'}}" />
            <span class="text-xs">{{this.this.testResponse.message}}</span>
        </div>
    {{/if}}
    <div class="mt-3 rounded-lg bg-gray-900 shadow-inner p-3">
        <div class="flex flex-col space-y-2">
            <div class="flex flex-row items-center">
                <div class="text-sm w-40">Title:</div>
                <Input @value={{this.testTitle}} placeholder="Push Notification Title" class="form-input flex-1" />
            </div>
            <div class="flex flex-row items-center">
                <div class="text-sm w-40">Message:</div>
                <Input @value={{this.testMessage}} placeholder="Push Notification Message" class="form-input flex-1" />
            </div>
            <div class="flex flex-row items-center">
                <div class="text-sm w-40">APN Device Token:</div>
                <Input @value={{this.apnToken}} placeholder="APN Device Token" class="form-input flex-1" />
            </div>
            <div class="flex flex-row items-center">
                <div class="text-sm w-40">FCM Device Token:</div>
                <Input @value={{this.fcmToken}} placeholder="FCM Device Token" class="form-input flex-1" />
            </div>
        </div>
        <Button @wrapperClass="mt-3" @icon="plug" @text="Test Config" @onClick={{this.test}} @isLoading={{this.isLoading}} />
    </div>
</ContentPanel>

<div class="mt-3 flex items-center justify-end">
    <Button @type="primary" @size="lg" @icon="save" @text="Save Changes" @onClick={{this.save}} @disabled={{this.isLoading}} @isLoading={{this.isLoading}} />
</div>